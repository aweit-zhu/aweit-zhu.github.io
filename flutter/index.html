
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="a short description of your website">
      
      
        <meta name="author" content="weizhi.zhu">
      
      
        <link rel="canonical" href="https://aweit-zhu.github.io/flutter/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.0.0b4">
    
    
      
        <title>FlutterFire - Aweit Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.91872f81.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flutterfire" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Aweit Docs" class="md-header__button md-logo" aria-label="Aweit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Aweit Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              FlutterFire
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Aweit Docs" class="md-nav__button md-logo" aria-label="Aweit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Aweit Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../stackheap/" class="md-nav__link">
        JVM - Stack & Heap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../binaryOperator/" class="md-nav__link">
        Binary & Bit Shift
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../forkJoinPool/" class="md-nav__link">
        ForkJoinPool
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../volatile/" class="md-nav__link">
        Volatile & synchronized
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../semaphore/" class="md-nav__link">
        Thread & Semaphore
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../completableFuture/" class="md-nav__link">
        Java 8 CompletableFuture
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../thread/" class="md-nav__link">
        Java Thread & Thread Pool
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-batch/" class="md-nav__link">
        Spring Boot 3 + Spring Batch 5
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../struts-tags/" class="md-nav__link">
        Struts2 + struts-tags
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../struts-valuestack/" class="md-nav__link">
        Struts2 + ValueStack + Form Validate
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../struts-props/" class="md-nav__link">
        Struts2 Properties Config
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tiles/" class="md-nav__link">
        Struts2 + Apache Tiles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ssh/" class="md-nav__link">
        SSH (Struts2 + Spring5 + Hibernate4)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-cloud-feign/" class="md-nav__link">
        Spring Cloud - OpenFeign Client
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-cloud-config/" class="md-nav__link">
        Spring Cloud - Config Server
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-cloud-eureka/" class="md-nav__link">
        Spring Cloud - Eureka Server
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-ldap/" class="md-nav__link">
        Spring Security & LDAP
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-keycloak/" class="md-nav__link">
        Spring Boot 3 and Keycloak
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-data-jpa/" class="md-nav__link">
        Spring Data JPA
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../spring-security/" class="md-nav__link">
        Spring Boot 3 and Spring Security 6 (JWT Authentication and Authorization)
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          FlutterFire
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        FlutterFire
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flutterfire" class="md-nav__link">
    FlutterFire
  </a>
  
    <nav class="md-nav" aria-label="FlutterFire">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step0-create-a-new-flutter-app" class="md-nav__link">
    Step0. create a new Flutter app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step1-install-the-required-command-line-tools" class="md-nav__link">
    Step1.  Install the required command line tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-configure-your-apps-to-use-firebase" class="md-nav__link">
    Step 2: Configure your apps to use Firebase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-initialize-firebase-in-your-app" class="md-nav__link">
    Step 3: Initialize Firebase in your app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-add-firebase-plugins" class="md-nav__link">
    Step 4: Add Firebase plugins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-started-with-firebase-authentication-on-flutter" class="md-nav__link">
    Get Started with Firebase Authentication on Flutter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-out-an-example-app-with-analytics" class="md-nav__link">
    Try out an example app with Analytics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../nfs/" class="md-nav__link">
        NFS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../velero/" class="md-nav__link">
        Velero
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../traefik/" class="md-nav__link">
        Treafik
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dapr/" class="md-nav__link">
        Dapr
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../practicek8s/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sonarqube/" class="md-nav__link">
        SonarQube
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../drone/" class="md-nav__link">
        Drone
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../microk8s/" class="md-nav__link">
        Microk8s
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flutterfire" class="md-nav__link">
    FlutterFire
  </a>
  
    <nav class="md-nav" aria-label="FlutterFire">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step0-create-a-new-flutter-app" class="md-nav__link">
    Step0. create a new Flutter app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step1-install-the-required-command-line-tools" class="md-nav__link">
    Step1.  Install the required command line tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-configure-your-apps-to-use-firebase" class="md-nav__link">
    Step 2: Configure your apps to use Firebase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-initialize-firebase-in-your-app" class="md-nav__link">
    Step 3: Initialize Firebase in your app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-add-firebase-plugins" class="md-nav__link">
    Step 4: Add Firebase plugins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-started-with-firebase-authentication-on-flutter" class="md-nav__link">
    Get Started with Firebase Authentication on Flutter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-out-an-example-app-with-analytics" class="md-nav__link">
    Try out an example app with Analytics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>FlutterFire</h1>

<h3 id="flutterfire">FlutterFire</h3>
<p><img alt="Alt text" src="../image-51.png" /></p>
<h4 id="step0-create-a-new-flutter-app">Step0. create a new Flutter app</h4>
<pre><code> flutter create example
</code></pre>
<p><img alt="Alt text" src="../image-52.png" /></p>
<h4 id="step1-install-the-required-command-line-tools">Step1.  Install the required command line tools</h4>
<ol>
<li>install the Firebase CLI <code>npm install -g firebase-tools</code></li>
<li>登入 Firebase. <code>firebase login</code></li>
</ol>
<p>如果已登入，會顯示 <code>Already logged in as aa4192696@gmail.com</code>
   如果未登入，則會跳出登入視窗，讓您透過 Google 帳號登入。</p>
<p>(<a href="https://console.firebase.google.com/">https://console.firebase.google.com/</a>)
3. 安裝 FlutterFire CLI.(全域)  <code>dart pub global activate flutterfire_cli</code></p>
<h4 id="step-2-configure-your-apps-to-use-firebase">Step 2: Configure your apps to use Firebase</h4>
<ol>
<li>
<p>進入到 Flutter 專案根目錄，執行以下指令</p>
<p><code>flutterfire configure</code></p>
<p>(1) 這邊以建立新的 firebase 專案為例，名字取：<code>aweit-example</code></p>
<p><img alt="Alt text" src="../image-54.png" /></p>
<p>(2) 全部就對了，這樣會在 Firebase 專案中，建立四個應用程式。</p>
<p><img alt="Alt text" src="../image-55.png" /></p>
<p>(3) 都成功後，會顯示以下資訊。</p>
<p><img alt="Alt text" src="../image-56.png" /></p>
</li>
</ol>
<h4 id="step-3-initialize-firebase-in-your-app">Step 3: Initialize Firebase in your app</h4>
<ol>
<li>
<p>安裝 firebase_core</p>
<p><code>flutter pub add firebase_core</code></p>
</li>
<li>
<p>再次執行 <code>flutterfire configure</code>，以確認 Flrebase 設定是最新的。</p>
</li>
<li>
<p>打開 lib/main.dart，插入以下代碼</p>
<p>原本
```
import 'package:flutter/material.dart';</p>
<p>void main() {
    runApp(const MyApp());
}
```</p>
<p>變更為
```
import 'package:flutter/material.dart';
import 'package:firebase_core/firebase_core.dart';
import 'firebase_options.dart';</p>
<p>Future<void> main() async {
    WidgetsFlutterBinding.ensureInitialized();
    await Firebase.initializeApp(
        options: DefaultFirebaseOptions.currentPlatform,
    );
    runApp(const MyApp());
}
```
4. flutter run</p>
</li>
<li>
<p>相關錯誤訊息處理方式</p>
<p>(1) 若出現 <code>If ServicesBinding is a custom binding mixin, there must also be a custom binding class, like WidgetsFlutterBinding, but that mixes in the selected binding, and that is the class that must be constructed before using the "instance" getter</code></p>
<p>要新增一行程式碼在 lib/main.dart 的 main 方法中的第一行。<br />
<code>WidgetsFlutterBinding.ensureInitialized();</code></p>
</li>
</ol>
<h4 id="step-4-add-firebase-plugins">Step 4: Add Firebase plugins</h4>
<blockquote>
<p>You access Firebase in your Flutter app through the various Firebase Flutter plugins, one for each Firebase product (for example: Cloud Firestore, Authentication, Analytics, etc.).</p>
<p>Since Flutter is a multi-platform framework, each Firebase plugin is applicable for Apple, Android, and web platforms. So, if you add any Firebase plugin to your Flutter app, it will be used by the Apple, Android, and web versions of your app.</p>
</blockquote>
<pre><code>flutter pub add {PLUGIN_NAME}
flutterfire configure
flutter run
</code></pre>
<p><img alt="Alt text" src="../image-58.png" /></p>
<h4 id="get-started-with-firebase-authentication-on-flutter">Get Started with Firebase Authentication on Flutter</h4>
<ol>
<li>Google Enable</li>
</ol>
<p><img alt="Alt text" src="../image-68.png" /></p>
<ol>
<li>Android - SHA Key</li>
</ol>
<pre><code>keytool -list -v -alias androiddebugkey -keystore .\.android\debug.keystore

password: android
</code></pre>
<blockquote>
<p>SHA1: 29:C4:07:39:3C:33:37:25:06:73:34:D4:DC:11:D2:7B:6C:34:F8:B4
SHA256: &gt;56:F3:29:12:BB:90:C9:D9:95:0F:16:80:F1:19:EE:D2:99:CB:6B:95:4D:30:5D:16:F6:43:FB:72:31:97:54:36</p>
</blockquote>
<p><img alt="Alt text" src="../image-66.png" /></p>
<p><img alt="Alt text" src="../image-67.png" /></p>
<ol>
<li>Flutter Project 相關設定</li>
</ol>
<p>安裝套件、設定 Firebase</p>
<pre><code>flutter pub add firebase_auth
flutter pub add google_sign_in
flutterfire configure
</code></pre>
<p>修改設定值
android\app\build.gradle</p>
<pre><code>defaultConfig {
    multiDexEnabled true
    minSdkVersion 19
}
</code></pre>
<p><img alt="Alt text" src="../image-69.png" /></p>
<p>Demo 程式</p>
<p>home.dart</p>
<pre><code>import 'package:flutter/material.dart';
import 'package:google_sign_in/google_sign_in.dart';

class HomePage extends StatefulWidget {
  @override
  _HomePageState createState() =&gt; _HomePageState();
}

class _HomePageState extends State&lt;HomePage&gt; {
  bool _isLoggedIn = false;
  late GoogleSignInAccount _userObj;
  final GoogleSignIn _googleSignIn = GoogleSignIn();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(&quot;Codesundar&quot;)),
      body: Container(
        child: _isLoggedIn
            ? Column(
                children: [
                  Image.network(_userObj.photoUrl!),
                  Text(_userObj.displayName!),
                  Text(_userObj.email),
                  TextButton(
                      onPressed: () {
                        _googleSignIn.signOut().then((value) {
                          setState(() {
                            _isLoggedIn = false;
                          });
                        }).catchError((e) {});
                      },
                      child: Text(&quot;Logout&quot;))
                ],
              )
            : Center(
                child: ElevatedButton(
                  child: Text(&quot;Login with Google&quot;),
                  onPressed: () {
                    _googleSignIn.signIn().then((userData) {
                      setState(() {
                        _isLoggedIn = true;
                        _userObj = userData!;
                      });
                    }).catchError((e) {
                      print(e);
                    });
                  },
                ),
              ),
      ),
    );
  }
}

</code></pre>
<p>main.dart</p>
<pre><code>import 'package:firebase_auth/firebase_auth.dart';
import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/material.dart';
import 'package:google_sign_in/google_sign_in.dart';
import 'firebase_options.dart';
import 'home.dart';

Future&lt;void&gt; main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Google Authencation Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: HomePage(),
    );
  }
}
</code></pre>
<ol>
<li>畫面</li>
</ol>
<p><img alt="Alt text" src="../image-70.png" /></p>
<p><img alt="Alt text" src="../image-71.png" /></p>
<p><img alt="Alt text" src="../image-72.png" /></p>
<ol>
<li>如果用 Web 會無法做出效果，出現以下錯誤訊息：</li>
</ol>
<p><code>ClientID not set. Either set it on a &lt;meta name=\"google-signin-client_id\" content=\"CLIENT_ID\" /&gt; tag, or pass clientId when initializing GoogleSignIn</code></p>
<p>(1) 去找 Clitne id : 8073574655-9c9sa7onebk99ju1mf2i5e1kfi5m4hk0.apps.googleusercontent.com</p>
<p><img alt="Alt text" src="../image-74.png" />
<img alt="Alt text" src="../image-73.png" /></p>
<p>(2) 修改代碼</p>
<p>home.dart</p>
<pre><code>原本
final GoogleSignIn _googleSignIn = GoogleSignIn();

後來
final GoogleSignIn _googleSignIn = GoogleSignIn(clientId: '8073574655-saga5315djjgbcgsgag5qfmgusl6tqpu.apps.googleusercontent.com');
</code></pre>
<p>(3) 出現以下訊息，則直接點選，照著步驟做即可。</p>
<blockquote>
<p>PlatformException(idpiframe_initialization_failed, Not a valid origin for the client: http://localhost:13529 has not been registered for client ID 8073574655-9c9sa7onebk99ju1mf2i5e1kfi5m4hk0.apps.googleusercontent.com. Please go to https://console.developers.google.com/ and register this origin for your project's client ID., https://developers.google.com/identity/sign-in/web/reference#error_codes, null)</p>
</blockquote>
<p><img alt="Alt text" src="../image-75.png" /></p>
<p>已授權的 JavaScript 來源，要把這個Port加上去
<img alt="Alt text" src="../image-77.png" /></p>
<p>(4) Flutter run 時，指定 PORT = 12621 參數。--web-port=12621</p>
<p><img alt="Alt text" src="../image-78.png" /></p>
<p>(5) 再次打開瀏覽器，並且清除快取和瀏覽資料。就可以了。</p>
<p><img alt="Alt text" src="../image-79.png" /></p>
<p><img alt="Alt text" src="../image-80.png" /></p>
<p><img alt="Alt text" src="../image-81.png" /></p>
<h4 id="try-out-an-example-app-with-analytics">Try out an example app with Analytics</h4>
<ol>
<li><code>flutter pub add firebase_analytics</code></li>
<li><code>flutterfire configure</code></li>
<li>Access the lib directory of the app, then delete the existing main.dart file.</li>
<li>
<p>將以下兩個檔案，複製貼上到專案中 lib/</p>
<p><a href="https://github.com/firebase/flutterfire/blob/master/packages/firebase_analytics/firebase_analytics/example/lib/main.dart">https://github.com/firebase/flutterfire/blob/master/packages/firebase_analytics/firebase_analytics/example/lib/main.dart</a></p>
<p><a href="https://github.com/firebase/flutterfire/blob/master/packages/firebase_analytics/firebase_analytics/example/lib/tabs_page.dart">https://github.com/firebase/flutterfire/blob/master/packages/firebase_analytics/firebase_analytics/example/lib/tabs_page.dart</a></p>
</li>
<li>
<p>執行 flutter run</p>
</li>
<li>
<p>錯誤訊息</p>
</li>
<li>
<p>錯誤1
  <img alt="Alt text" src="../image-59.png" /></p>
</li>
</ol>
<p><img alt="Alt text" src="../image-60.png" /></p>
<ul>
<li>錯誤2</li>
</ul>
<p>如果出現 <code>Missing google_app_id. Firebase Analytics disabled</code> 錯誤訊息</p>
<p>代表有兩個地方需要修改：</p>
<pre><code>- android\build.gradle

```
classpath 'com.google.gms:google-services:4.3.15'
```
![Alt text](image-61.png)

- android\app\build.gradle

```
apply plugin: 'com.google.gms.google-services'
```

![Alt text](image-62.png)
</code></pre>
<ol>
<li>成果</li>
</ol>
<p><img alt="Alt text" src="../image-63.png" /></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.3de43c86.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ce0331ff.min.js"></script>
      
    
    
  </body>
</html>